---
layout: layouts/base.njk
title: "Tarifs assistant maternel vs cr√®che 2026 Br√©tigny | Simulation"
description: "Comparez le co√ªt d‚Äôune cr√®che et d‚Äôune assistante maternelle √† Br√©tigny. Simulation claire avec aides CAF et reste √† charge."
url: "https://chubert91assmat.netlify.app/simulateur-cout-creche-assistante-maternelle/"
image: "/images/uploads/simulateur-comparatif-creche-assistante-maternelle.jpg"

eleventyNavigation:
  key: "Tarifs et simulation"
  order: 4

permalink: "/simulateur-cout-creche-assistante-maternelle/"
bodyClass: "bg-white simulateur-cout-creche-assistante-maternelle"

# JSON-LD WebPage
jsonldWebPage:
  "@context": "https://schema.org"
  "@type": "WebPage"
  "@id": "https://chubert91assmat.netlify.app/simulateur-cout-creche-assistante-maternelle/#webpage"
  name: "Simulation co√ªt cr√®che vs assistante maternelle 2026"
  url: "https://chubert91assmat.netlify.app/simulateur-cout-creche-assistante-maternelle/"
  description: "Comparez le co√ªt d‚Äôune cr√®che et d‚Äôune assistante maternelle √† Br√©tigny avec aides CAF et reste √† charge. Simulation claire et pratique pour les parents."
  isPartOf:
    "@type": "WebSite"
    "@id": "https://chubert91assmat.netlify.app/#website"
  about:
    "@id": "https://chubert91assmat.netlify.app/#business"

# JSON-LD FAQPage
jsonldFAQ:
  "@context": "https://schema.org"
  "@type": "FAQPage"
  description: "Foire aux questions sur les co√ªts et les simulateurs pour l'accueil d'enfants par une assistante maternelle √† Br√©tigny-sur-Orge."
  mainEntity:
    - "@type": "Question"
      name: "√Ä quoi sert le simulateur de co√ªt assistante maternelle vs cr√®che √† Br√©tigny-sur-Orge ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Le simulateur vous aide √† comparer le reste √† charge entre diff√©rents modes d‚Äôaccueil (assistante maternelle, cr√®che PSU, micro-cr√®che PAJE) √† Br√©tigny-sur-Orge. Vous pouvez ainsi identifier la solution la plus adapt√©e √† votre budget et √† vos besoins familiaux, sans calculs complexes."
    - "@type": "Question"
      name: "Les r√©sultats du simulateur sont-ils fiables ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Oui, mais il s‚Äôagit d‚Äôune estimation indicative. Les aides varient selon votre situation personnelle, le type de structure choisi et la validation de la CAF. Aucune donn√©e personnelle n‚Äôest conserv√©e, garantissant votre confidentialit√©."
    - "@type": "Question"
      name: "Quels tarifs sont pris en compte pour les micro-cr√®ches ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Les micro-cr√®ches appliquent librement leurs tarifs, g√©n√©ralement entre 9 ‚Ç¨ et 10 ‚Ç¨ de l‚Äôheure pour la premi√®re tranche, avec un tarif d√©gressif selon le nombre d‚Äôheures. Le simulateur utilise une fourchette r√©aliste pour l‚ÄôEssonne, mais le tarif pr√©cis d√©pend de chaque √©tablissement."
    - "@type": "Question"
      name: "O√π trouver les simulateurs officiels CAF et URSSAF ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Vous pouvez utiliser les simulateurs officiels suivants pour estimer les co√ªts li√©s √† l‚Äôaccueil de votre enfant : <ul><li>Simulateur URSSAF CMG ‚Äì Assistante maternelle : <a href=\"https://www.urssaf.fr/accueil/outils-documentation/simulateurs/calculer-reste-a-charge-cmg-pe.html\">https://www.urssaf.fr/accueil/outils-documentation/simulateurs/calculer-reste-a-charge-cmg-pe.html</a></li><li>Simulateur CAF ‚Äì Cr√®che PSU : <a href=\"https://monenfant.fr/simuler-le-cout-en-creche\">https://monenfant.fr/simuler-le-cout-en-creche</a></li></ul>"
    - "@type": "Question"
      name: "Pourquoi proposer un simulateur sur le site d‚Äôune assistante maternelle ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Ce simulateur est con√ßu pour : <ul><li>Faire gagner du temps aux parents en regroupant les trois modes d‚Äôaccueil sur une seule page.</li><li>Apporter plus de clart√© sur les diff√©rences de calcul entre cr√®ches PSU, cr√®ches PAJE et assistantes maternelles.</li><li>Corriger les id√©es re√ßues : la cr√®che n‚Äôest pas toujours la solution la moins ch√®re.</li><li>Rassurer les familles : le salaire d‚Äôune assistante maternelle peut sembler √©lev√©, mais le reste √† charge r√©el, indemnit√©s incluses, reste souvent comparable √† celui d‚Äôune place en cr√®che PSU.</li><li>Adapter les tarifs pour maintenir une coh√©rence entre les offres locales tout en pr√©servant la p√©rennit√© de l‚Äôactivit√© professionnelle.</li></ul>"
    - "@type": "Question"
      name: "O√π consulter des exemples concrets de co√ªt r√©el ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Vous pouvez acc√©der √† des exemples pr√©cis de reste √† charge et de calculs pour diff√©rentes situations familiales √† Br√©tigny-sur-Orge sur la page <a href=\"#exemples-cout-reel-assistante-maternelle\">Exemples de co√ªt r√©el pour une assistante maternelle</a>."
    - "@type": "Question"
      name: "Pourquoi mon aide CMG peut-elle changer au cours du contrat ?"
      acceptedAnswer:
        "@type": "Answer"
        text: "Le montant du Compl√©ment de mode de garde (CMG) n'est pas fixe. La CAF r√©√©value vos droits chaque ann√©e selon vos revenus N-2. Je vous aide √† anticiper ces variations d√®s le d√©but de l'accueil pour stabiliser votre budget et assurer une collaboration sereine sur le long terme."
---


    
<!-- Ic√¥ne de d√©filement vers le haut utilisant une image SVG -->
<a href="#simulateur-reforme-cmg-assmat-creche" class="scroll-to-top">
    <img class="rocket-icon" src="../images/rocket-svgrepo-com.svg" alt="Ic√¥ne de fus√©e pour remonter en haut de la page projet d'accueil" />
</a>





<section id="simulateur-reforme-cmg-assmat-creche" class="container-fluid py-5 position-relative">
<div class="container-md">



  <!-- Premier ligne -->
        <div class="row">
            <!-- h1 (Texte √† gauche) -->
            <div class="col-md-6 p-0 d-flex align-items-center">
                <div class="simulateur-garde-enfants-item">
                    <div class="simulateur-garde-enfants-text-space p-4">
                        <div class="description-atout-services">
                        <h1 class="poppins-bold-titre-h1">Simulateur co√ªt cr√®che vs assistante maternelle 2026 ‚Äì Br√©tigny-sur-Orge</h1>
                        <hr class="horizontal-line">
                        
                            <p class="poppins-regular-balise-p">{{ aProposDescription | default("√Ä Br√©tigny-sur-Orge, trouvez l‚Äôaccueil id√©al pour votre enfant avec une assistante maternelle agr√©√©e qui partage vos valeurs. Le co√ªt compte, mais le feeling et un projet d‚Äôaccueil personnalis√© font toute la diff√©rence. Estimez vos frais d√®s maintenant avec le simulateur !") }}</p>
                            
                            <!-- Bouton "lien interne" -->
 <a href="#comparer-creche-assistante-maternelle" class="btn btn-action-primary">
    Lancer ma simulation CMG ‚Üí
  </a>



                        </div>
                    </div>
                </div>
            </div>
            <!-- Image √† droite -->
            <div class="col-md-6 p-0">
                <div class="services-garde-enfants-item">
                    <div class="services-garde-enfants-image">
                        <div class="image-frame-services position-relative">

                {% image "/images/simulateur/valeur-accueil-bretigny91.jpg", "Photo illustrant une promenade en tant qu'assistante maternelle", "(min-width: 1024px) 100vw, 50vw", width=800, height=600, loading="eager", fetchpriority="high" %}

                    
                            <div class="image-overlay"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


</div>
    
        </div>
    </div>
</section>







<div class="svg-banniere-background">
     <div class="svg-container">
    <img src="{{ '/images/projet-accueil/nuage-bienvenue-pc.svg' | url }}" 
         class="nuages-bleus-curvy pc-svg" 
         alt="Illustration de nuages pour la pr√©sentation du blog sur PC"
         loading="lazy">
    
    <img src="{{ '/images/projet-accueil/nuage-bienvenue-mobile.svg' | url }}" 
         class="nuages-bleus-curvy mobile-svg" 
         alt="Illustration de nuages pour la pr√©sentation du blog sur mobile"
         loading="lazy">
</div>



<section id="comparer-creche-assistante-maternelle">
  <div class="container-service container-md">
  <h2 class="poppins-bold-titre-h2 mb-5">Estimez gratuitement votre reste √† charge 2026</h2>



  <p class="poppins-regular-balise-p small mb-2">
    Le montant de vos aides peut varier d'une ann√©e √† l'autre selon vos revenus N-2.
  </p>
  <a href="#conseil-expert-cmg" class="btn btn-action-primary">
    Comment stabiliser mon budget sur 3 ans ? ‚Üí
  </a>



 

    <div class="row">
      <div class="container my-5">

       
      <h3 class="poppins-bold-titre-h2 mb-5">
  Simulateur CMG 2026 : Calculez le co√ªt de votre assmat √† Br√©tigny
</h3>







  <form id="simulateur-form" class="row g-4">
  <!-- Situation familiale -->
  <div class="col-md-6">
    <label class="form-label poppins-regular-balise-p">Situation familiale</label>
    <div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="situation" value="couple" id="situationCouple" checked required>
        <label class="form-check-label poppins-regular-balise-p" for="situationCouple">Couple</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="situation" value="mono" id="situationMono" required>
        <label class="form-check-label poppins-regular-balise-p" for="situationMono">Parent isol√©</label>
      </div>
    </div>
  </div>



<div class="col-md-6">
  <label for="nbEnfants" class="form-label poppins-regular-balise-p">Nombre d‚Äôenfants √† charge</label>
  <input type="number" class="simu-control styled-input" id="nbEnfants" name="nbEnfants" min="1" max="4" required>
</div>



  <!-- Ressources -->
<div class="col-md-6">
  <label for="revenu" class="form-label poppins-regular-balise-p">Ressources annuelles 2024 (‚Ç¨)</label>
  <input 
    type="number" 
    class="simu-control styled-input" 
    id="revenu" 
    name="revenu" 
    min="0" 
    max="102000" 
    required
  >
</div>


 <!-- √Çge enfant -->
<div class="col-md-6">
  <label class="form-label poppins-regular-balise-p">√Çge de l‚Äôenfant √† garder</label>
  <div class="form-control-plaintext poppins-regular-titre-h3">0 √† 3 ans</div>
  <input type="hidden" id="ageEnfant" name="ageEnfant" value="0-3">
</div>









<div class="col-md-6">
  <label for="heuresHebdo" class="form-label poppins-regular-balise-p">Heures de garde par semaine</label>
  <input type="number" step="0.01" class="simu-control styled-input" id="heuresHebdo" name="heuresHebdo" min="0">
</div>









<div class="col-md-6">
  <label for="semainesParAn" class="form-label poppins-regular-balise-p">
    Type de contrat
  </label>
 <select class="form-select styled-select" id="semainesParAn" name="semainesParAn" required>
  <option value="" disabled selected>-- Choisissez une option --</option>
  <option value="52">52 semaines ‚Äì ann√©e compl√®te</option>
  <option value="46">46 sem. / an (hors cong√©s)</option>
    <option value="45">45 sem. / an (hors cong√©s)</option>
    <option value="44">44 sem. / an (hors cong√©s)</option>
    <option value="43">43 sem. / an (hors cong√©s)</option>
    <option value="42">42 sem. / an (hors cong√©s)</option>
    <option value="41">41 sem. / an (hors cong√©s)</option>
    <option value="40">40 sem. / an (hors cong√©s)</option>
    <option value="39">39 sem. / an (hors cong√©s)</option>
    <option value="38">38 sem. / an (hors cong√©s)</option>
    <option value="37">37 sem. / an (hors cong√©s)</option>
    <option value="36">36 sem. / an (hors cong√©s)</option>
  </select>
</div>


  <!-- Taux horaire -->
  <div class="col-md-6">
    <label for="tauxHoraire" class="form-label poppins-regular-balise-p">Taux horaire net assmat (‚Ç¨)</label>
    <input type="number" step="0.01" class="simu-control" id="tauxHoraire" name="tauxHoraire" required>
  </div>



  <!-- Indemnit√©s -->
  <div class="col-md-3">
    <label for="indemEntretien" class="form-label poppins-regular-balise-p">Indemnit√© d'entretien (‚Ç¨ / mois)</label>
    <input type="number" step="0.01" class="simu-control" id="indemEntretien" name="indemEntretien" required>
  </div>

  <div class="col-md-3">
    <label for="indemRepas" class="form-label poppins-regular-balise-p">Indemnit√© de repas (‚Ç¨ / mois)</label>
    <input type="number" step="0.01" class="simu-control" id="indemRepas" name="indemRepas" required>
  </div>







<!-- ‚¨áÔ∏è CASE √Ä COCHER -->
<div class="col-md-6">
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="connaitPrixAccueil">
   <label class="form-check-label" for="connaitPrixAccueil">
  <span class="poppins-regular-balise-p">
    Tarif connu sur devis micro-cr√®che <strong>PAJE</strong>
    (Les simulateurs indiquent souvent le tarif PSU, qui ne s‚Äôapplique pas ici.)
  </span>
</label>

  </div>
</div>

<!-- ‚¨áÔ∏è CHAMP SAISI OU AUTOCALCUL√â -->
<div class="col-md-6 d-none" id="prixAccueilWrapper">
  <label for="prixAccueil" class="form-label poppins-regular-balise-p">Montant total mensuel factur√© par la cr√®che sur devis <strong>(aide CAF (CMG) et cr√©dit d'imp√¥t non d√©duits)</strong> (‚Ç¨)</label>
  <input 
    type="number" 
    step="0.01" 
    class="simu-control styled-input" 
    id="prixAccueil" 
    name="prixAccueil"
    placeholder="Saisir un montant personnalis√©"
  >
</div>













 
  <!-- Bouton unique -->
  <div class="col-12 mb-5 text-center">
    <button type="submit" class="btn btn-simu">Calculer mon reste √† charge</button>
  </div>
</form>







<!-- R√©sultat -->
<div id="result-box" class="alert mt-4 d-none" role="alert">
  <div id="result-message"></div>
</div>

<button id="btn-pdf" class="btn btn-simu mt-3 d-none">T√©l√©charger le PDF</button>
<button id="btn-reset" class="btn btn-simu mt-3 d-none">‚Üª Recommencer</button>



<!-- Barom√®tre visuel (affich√© uniquement si CMG favorable) -->
<div id="barometre-wrapper" class="my-4 d-none">



  <!-- Titre -->
  <h3 class="poppins-bold-titre-h3 mb-5">Comparatif visuel reste √† charge (barom√®tre)</h3>
  

  <!-- Barom√®tre -->
<div id="barometre" class="position-relative" style="height: 30px; background: linear-gradient(to right, #d8dd8e, #F79927); border-radius: 15px;">
  <div id="curseur">
    
      <img src="{{ '/images/simulateur/baby-nipple-simulateur.svg' | url }}" class="curseur-tetine" alt="Ic√¥ne curseur t√™tine chez celine" />
  </div>
</div>

  <!-- L√©gende en dessous -->
  <div class="d-flex justify-content-between mt-5 px-1">
    <span class="poppins-bold-titre-h3">Cr√®che PSU</span>
  <span class="poppins-bold-titre-h3">Micro-cr√®che PAJE</span>
  </div>


<!-- Section simulateur (visible uniquement selon profil) -->
<div id="simulateur-additional" class="mt-4" style="display: none;">
  <h4>Estimation personnalis√©e</h4>
  <p>Formulaire ou √©l√©ments compl√©mentaires ici‚Ä¶</p>
</div>







        </div>
      </div>
    </div>
  </div>
</section>



<section id="calculs-automatiques-assistante-maternelle">
  <div class="container-service container-md">
  <h2 class="poppins-bold-titre-h2 mb-5">D√©tails de votre calcul (heures, taux horaire, salaire net)</h2>

   

 <div class="row gy-4">
      <!-- Carte 3 -->
      <div class="col-12 mb-5">
        <div class="comparatif-card h-100 p-4">
          <h3 class="poppins-bold-titre-h3">
            <span class="comparatif-icon-wrapper me-2">
              <img src="{{ '/images/simulateur/auto-simulateur-bretigny.svg' | url }}" class="bien-etre-icon" alt="Tableau comparatif co√ªt cr√®che vs assistante maternelle Br√©tigny-sur-Orge" loading="lazy">
            </span>
          Vos donn√©es saisies (r√©capitulatif apr√®s calcul)
          </h3>


  
          
         <!-- Carte des calculs automatiques -->
<div class="col-12">


  <div class="comparatif-card h-100 p-4">
   
 <p class="poppins-bold-balise-p mb-3">
    Contrairement aux micro-cr√®ches PAJE souvent au forfait annuel, les cr√®ches PSU et les assistantes maternelles peuvent proposer des contrats plus souples, adapt√©s au nombre r√©el de semaines de garde souhait√©es.
    </p>



<!-- Heures -->
 <div class="col-md-6 mb-3">
  <label for="heuresMensuelles" class="form-label poppins-regular-balise-p">
    Heures de garde par mois (Assmat / Cr√®che PSU)
  </label>
  <input
    type="number"
    class="simu-auto-control"
    id="heuresMensuelles"
    name="heuresMensuelles"
    step="0.01"
    readonly
  >

  <!-- Heures mensuelles PSU (non affich√©es, mais utilis√©es dans le script) -->
  <input
    type="hidden"
    id="heuresMensuellesPSU"
    name="heuresMensuellesPSU"
  >

  <!-- Heures micro-cr√®che : affich√©es aux parents -->
  <label for="heuresMensuellesMicro" class="form-label mt-2 poppins-regular-balise-p">
    Heures mensuelles micro-cr√®che PAJE (base 52 sem.)
  </label>
  <input
    type="number"
    class="simu-auto-control"
    id="heuresMensuellesMicro"
    name="heuresMensuellesMicro"
    readonly
    step="0.01"
  >
</div>

 <p class="poppins-bold-balise-p mb-3">
     Le taux horaire CMG sert de plafond pour le calcul de l‚Äôaide, afin que le montant vers√© aux parents soit proportionnel aux heures r√©ellement travaill√©es, rendant l‚Äôaide plus √©quitable et adapt√©e √† chaque famille.
    </p>

  <!-- Taux horaire complet (calcul√©) -->
      <div class="col-md-6 mb-3">
        <label for="tauxComplet" class="form-label poppins-regular-balise-p">Taux horaire complet CMG (‚Ç¨)</label>
        <input type="text" class="simu-auto-control" id="tauxComplet" name="tauxComplet" readonly>
        <div id="alertePlafondCMG" class="alert alert-warning mt-2 d-none"></div>
      </div>



 <p class="poppins-bold-balise-p mb-3">
     <strong>Ne vous fiez pas au salaire net affich√© : apr√®s d√©duction des aides de la CAF et du cr√©dit d‚Äôimp√¥t, le co√ªt mensuel pour une assistante maternelle est g√©n√©ralement proche de celui d‚Äôune cr√®che.</strong>
    </p>


  <!-- Salaire net mensuel (calcul√©) -->
      <div class="col-md-6">
        <label for="salaireNet" class="form-label poppins-regular-balise-p">Salaire net mensuel (‚Ç¨)</label>
      <input type="text" class="simu-auto-control" id="salaireNet" name="salaireNet" readonly>
      </div>


    </div>
  </div>
</div>


        </div>
      </div>


</div> <!-- Fin de la carte 1 -->
</div> <!-- Fin du row -->
</div> <!-- Fin du container -->
</section> <!-- Fermeture de la section comparer-creche-assistante-maternelle -->





<section id="reforme-cmg-2026" class="py-5">
<div class="container-md"> <!-- Conteneur centr√© et responsive -->
  <h2 class="poppins-bold-titre-h2 mb-4">R√©forme CMG effective depuis 2025 (impacts 2026) : ce qui change vraiment pour les parents √† Br√©tigny-sur-Orge</h2>
  
  <p class="poppins-regular-balise-p lead mb-4 mt-4">
    Depuis le 1er septembre 2025, la r√©forme du Compl√©ment de mode de garde (CMG) simplifie et harmonise les aides. √Ä Br√©tigny-sur-Orge, l'objectif est clair : <strong>rapprocher le co√ªt d'une assistante maternelle de celui d'une place en cr√®che</strong>. Voici les ajustements cl√©s pour votre budget 2026.
  </p>

  <div class="row g-4">
    <div class="col-lg-6">
      <div class="card-reforme">
        <h3 class="poppins-bold-titre-h3 mb-3">1. Un calcul bas√© sur votre "reste √† charge"</h3>
        <p class="poppins-regular-balise-p">
          Le montant de l'aide s'adapte d√©sormais pr√©cis√©ment √† vos revenus et au nombre d'heures r√©elles. Pour beaucoup de familles √† revenus modestes, le reste √† charge diminue fortement, rendant l'emploi d'une assistante maternelle aussi accessible qu'une cr√®che publique.
        </p>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card-reforme">
        <h3 class="poppins-bold-titre-h3 mb-3">2. Aide √©tendue jusqu'aux 12 ans</h3>
        <p class="poppins-regular-balise-p">
          C'est une victoire pour les parents solos / monoparentaux √† Br√©tigny : si vous √©levez seul(e) votre enfant, vous pouvez d√©sormais b√©n√©ficier du CMG <strong>jusqu'aux 12 ans de l'enfant</strong> (contre 6 ans auparavant) pour couvrir les gardes p√©riscolaires.
        </p>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card-reforme">
        <h3 class="poppins-bold-titre-h3 mb-3">3. Partage de l'aide en cas de s√©paration</h3>
        <p class="poppins-regular-balise-p">
          Depuis 1er d√©cembre 2025, en cas de <strong>r√©sidence altern√©e</strong>, chaque parent peut d√©sormais percevoir sa propre part de CMG, sous r√©serve de remplir les conditions d'√©ligibilit√© et d'avoir des contrats de travail distincts.
        </p>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card-reforme">
        <h3 class="poppins-bold-titre-h3 mb-3">4. Un "bouclier" pour ne pas y perdre</h3>
        <p class="poppins-regular-balise-p">
          Si le nouveau calcul s'av√©rait moins favorable pour vous, un <strong>compl√©ment transitoire</strong> est automatiquement appliqu√© pour maintenir votre niveau d'aide habituel (sous conditions de ressources et de volume horaire).
        </p>
      </div>
    </div>
  </div>

  <div class="col-12 mt-4">
    <div class="card-reforme">
      <h3 class="poppins-bold-titre-h3 mb-3">Ce qu'il faut retenir pour vos d√©clarations</h3>
      <p class="poppins-regular-balise-p mb-3">
        L'Urssaf Pajemploi applique ces changements <strong>automatiquement</strong>. Vous n'avez aucune d√©marche √† faire, sauf en cas de changement de situation familiale (s√©paration ou garde d'un enfant de plus de 6 ans).
      </p>
      
      <p class="poppins-regular-balise-p small text-muted">
        Source officielle : 
        <a href="https://www.urssaf.fr/accueil/actualites/evolution-cmg-ce-qui-va-changer.html" target="_blank" rel="noopener noreferrer" class="style-liens">
          Urssaf / Pajemploi ‚Äì R√©forme CMG 2025-2026
        </a>
      </p>
    </div>
  </div>

  <div class="text-center mt-5">
    <p class="poppins-bold-balise-p mb-3">
      V√©rifiez l'impact pr√©cis sur votre budget mensuel √† Br√©tigny-sur-Orge :
    </p>
    <a href="#comparer-creche-assistante-maternelle" class="btn btn-action-primary-b">
      Relancer ma simulation personnalis√©e 2026 ‚Üí
    </a>
  </div>
   </div>
</section>








<section id="conseil-expert-cmg">
    <div class="container-md">
        <div class="astuce-cmg-card">
            
            <div class="d-flex align-items-center mb-3">
                <span class="comparatif-icon-wrapper me-3">
                    <img src="{{ '/images/faq/ampoule.svg' | url }}" class="bien-etre-icon" alt="Astuce CMG" loading="lazy">
                </span>
               <h2 class="poppins-bold-titre-h2 mb-4">Baisse du CMG : Ma strat√©gie pour lisser vos aides sur 3 ans</h2>
            </div>

            <p class="poppins-regular-balise-p mb-4 mt-4">
                Le montant de la CAF (CMG) √©volue selon vos revenus d'il y a 2 ans. Pour √©viter les variations brutales du budget, je vous aide √† <strong>anticiper une moyenne stable</strong>.
            </p>

            <div class="row g-4 align-items-stretch">
                <div class="col-lg-7">
                    <div class="card-strategie p-3 rounded border bg-white h-100">
                      <h3 class="poppins-bold-balise-p mb-3">Anticiper la baisse des aides CAF</h3>
                        <ul class="poppins-regular-balise-p mb-0">
                            <li class="mb-2"><strong>Anticiper :</strong> Vous simulez la moyenne de vos aides sur 3 ans.</li>
                            <li class="mb-2"><strong>√âpargner :</strong> Vous mettez de c√¥t√© le "surplus" quand l'aide est haute.</li>
                            <li><strong>Piocher :</strong> Vous utilisez cette r√©serve quand l'aide diminue.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-5">
                    <div class="card-bleu-fonce p-3 rounded shadow-sm h-100 d-flex flex-column justify-content-center text-center">

                        <span class="poppins-bold-titre-blanc-h1">382 ‚Ç¨ / mois CMG</span>
                        <span class="small opacity-90">C'est votre aide r√©elle liss√©e (exemple bas√© sur 3 ans d'accueil: 263‚Ç¨ + 682‚Ç¨ + 201‚Ç¨ = 1 146‚Ç¨ / 3 = 382‚Ç¨ de CMG moyenne).</span>
                    </div>
                </div>
            </div>

           <div class="alert alert-custom-info mt-4 mb-0 border-0">
                <h3 class="poppins-bold-balise-p mb-3"><i class="bi bi-calculator me-2"></i>Concr√®tement, comment √ßa marche ?</h3>
                
              <div class="row g-3 cards-equal-height">
  <div class="col-md-4">
    <div class="card-mini-equal bg-white p-2 rounded text-center border">
    <small class="d-block text-muted">
      Ann√©e 1 - <a href="#exemple-situation-b" class="style-liens text-decoration-none">Situation B</a>
    </small>
    <strong>263 ‚Ç¨</strong> d'aide
    <div class="poppins-regular-balise-p small mt-1">En couple avec 1 enfant</div>
  </div>
</div>

                    <div class="col-md-4">
                         <div class="card-mini-equal bg-white p-2 rounded text-center border">
                           <small class="d-block text-muted">
      Ann√©e 2 - <a href="#exemple-situation-a" class="style-liens text-decoration-none">Situation A</a>
    </small>
                            <strong>682 ‚Ç¨</strong> d'aide
                           <div class="poppins-regular-balise-p small mt-1">Ann√©e de transition (cong√© parental ou temps partiel)</div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card-mini-equal bg-white p-2 rounded text-center border">
                             <small class="d-block text-muted">
      Ann√©e 3 - <a href="#exemple-situation-c" class="style-liens text-decoration-none">Situation C</a>
    </small>
                            <strong>201 ‚Ç¨</strong> d'aide
                            <div class="poppins-regular-balise-p small mt-1">Reprise d'activit√© √† plein temps</div>
                        </div>
                    </div>
                </div>

                <div class="mt-3 p-2 text-center">
                    <p class="poppins-bold-balise-p mb-0">
                        R√©sultat : Anticiper, c'est transformer des aides variables en un budget fixe et sans surprise pendant 3 ans !
                    </p>
                </div>
            </div>

            <div class="text-center mt-4">
             <a href="{{ '/contact/' | url }}" class="btn btn-action-primary mb-5">Pr√©parons sereinement l'accueil de votre enfant ‚Üí</a>
            </div>
        </div>
    </div>
</section>



<div class="svg-banniere-background">
     <div class="svg-container">
    <img src="{{ '/images/simulateur/nuage-simu-exemples-pc.svg' | url }}" 
         class="nuages-bleus-curvy pc-svg" 
         alt="Illustration de nuages pour la pr√©sentation des exemples de contrats types sur PC"
         loading="lazy">
    
    <img src="{{ '/images/simulateur/nuage-simu-exemples-mobile.svg' | url }}" 
         class="nuages-bleus-curvy mobile-svg" 
         alt="Illustration de nuages pour la pr√©sentation des exemples de contrats types sur mobile"
         loading="lazy">
</div>






<section id="exemples-cout-reel-assistante-maternelle">
  <div class="container-service container-md">
    <h2 class="poppins-bold-titre-h2 mb-5">Exemples concrets de reste √† charge r√©el √† Br√©tigny (2025‚Äì2026)</h2>

 <!-- Mention mise √† jour - SEO + confiance -->
    <div class="card-reforme">
      <small class="poppins-regular-balise-p mb-0">
      <strong>Exemples bas√©s sur les tarifs 2025</strong> ‚Äì mise √† jour pr√©vue d√©but 2026.
      </small>
    </div>


 <p class="poppins-regular-balise-p mb-5">
  √Ä contrat √©quivalent et pour un accueil personnalis√©, le montant du reste √† charge d√©pend de la situation de chaque famille (revenus, nombre d‚Äôenfants √† charge, etc.).
</p>


<div class="exemple-container">
  <a href="/faq/" class="btn btn-action-primary-b">Je m'informe sur la r√©forme CMG ‚Üí</a>
</div>


    <div class="row gy-4">
      <!-- Carte 1 -->
      <div class="col-12">
        <div class="comparatif-card h-100 p-4" id="exemple-situation-a">
          <h3 class="poppins-bold-titre-h3">
            <span class="comparatif-icon-wrapper me-2">
              <img src="{{ '/images/faq/book-and-magnifying-glass-svgrepo-com.svg' | url }}" class="bien-etre-icon" alt="Ic√¥ne communication" loading="lazy">
            </span>
            Situation A ‚Äì Couple 2 enfants ‚Äì 38 000 ‚Ç¨
          </h3>
          <ul class="poppins-regular-balise-p">
        
           <li><strong>Contrat en ann√©e compl√®te - 52s sur 4 jours - tarif 2025</strong></li>
            <li>En couple</li>
            <li>Ressources annuelles 2023 (‚Ç¨): 38000‚Ç¨.</li>
            <li>Nombre d‚Äôenfants √† charge: 2.</li>
            <li>Heures de garde par semaine: 45h.</li>
            <li>Taux horaire net (‚Ç¨): 4,28.</li>
            <li>Indemnit√© d'entretien (‚Ç¨ / mois): 5,35‚Ç¨ X 18 jours = 96,3‚Ç¨.</li>
            <li>Indemnit√© de repas (‚Ç¨ / mois): 5,45‚Ç¨ X 18 jours = 98,1‚Ç¨.</li>
            <li><strong>Reste √† charge Assistante Maternelle : 347‚Ç¨.</strong></li>
            <li><strong>Le reste √† charge est comparable √† celui d'une cr√®che PSU (Prestation de Service Unique).</strong></li>
          </ul>
        </div>
      </div>

      <!-- Carte 2 -->
      <div class="col-12">
        <div class="comparatif-card h-100 p-4" id="exemple-situation-b">
          <h3 class="poppins-bold-titre-h3">
            <span class="comparatif-icon-wrapper me-2">
              <img src="{{ '/images/faq/book-and-magnifying-glass-svgrepo-com.svg' | url }}" class="bien-etre-icon" alt="Ic√¥ne communication" loading="lazy">
            </span>
            Situation B ‚Äì Couple 1 enfant ‚Äì 70 000 ‚Ç¨
          </h3>
          <ul class="poppins-regular-balise-p">
           <li><strong>Contrat en ann√©e compl√®te - 52s sur 4 jours - tarif 2025</strong></li>
            <li>En couple</li>
            <li>Ressources annuelles 2023 (‚Ç¨): 70000‚Ç¨.</li>
            <li>Nombre d‚Äôenfants √† charge: 1.</li>
            <li>Heures de garde par semaine: 45h.</li>
            <li>Taux horaire net (‚Ç¨): 4,28.</li>
            <li>Indemnit√© d'entretien (‚Ç¨ / mois): 5,35‚Ç¨ X 18 jours = 96,3‚Ç¨.</li>
            <li>Indemnit√© de repas (‚Ç¨ / mois): 5,45‚Ç¨ X 18 jours = 98,1‚Ç¨.</li>
            <li><strong>Reste √† charge Assistante Maternelle : 782‚Ç¨.</strong></li>
            <li><strong>La diff√©rence mensuelle avec le reste √† charge de la cr√®che PSU est de seulement 78‚Ç¨ et vous b√©n√©ficiez d'un accueil premium personnalis√©.</strong></li>
          </ul>
        </div>
      </div>

      <!-- Carte 3 -->
      <div class="col-12">
       <div class="comparatif-card h-100 p-4" id="exemple-situation-c">
          <h3 class="poppins-bold-titre-h3">
            <span class="comparatif-icon-wrapper me-2">
              <img src="{{ '/images/faq/book-and-magnifying-glass-svgrepo-com.svg' | url }}" class="bien-etre-icon" alt="Ic√¥ne communication" loading="lazy">
            </span>
            Situation C ‚Äì Couple 2 enfants ‚Äì 90 800 ‚Ç¨
          </h3>
          <ul class="poppins-regular-balise-p">
            <li><strong>Contrat en ann√©e compl√®te - 52s sur 4 jours - tarif 2025</strong></li>
            <li>En couple</li>
            <li>Ressources annuelles 2023 (‚Ç¨): 90800‚Ç¨.</li>
            <li>Nombre d‚Äôenfants √† charge: 2.</li>
            <li>Heures de garde par semaine: 45h.</li>
            <li>Taux horaire net (‚Ç¨): 4,28.</li>
            <li>Indemnit√© d'entretien (‚Ç¨ / mois): 5,35‚Ç¨ X 18 jours = 96,3‚Ç¨.</li>
            <li>Indemnit√© de repas (‚Ç¨ / mois): 5,45‚Ç¨ X 18 jours = 98,1‚Ç¨.</li>
            <li><strong>Reste √† charge Assistante Maternelle : 828‚Ç¨.</strong></li>
            <li><strong>Vous b√©n√©ficiez d'un maintien de CMG de 201‚Ç¨, votre situation ne change pas avec la nouvelle reforme CMG.</strong></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>


<div class="svg-banniere-background">
     <div class="svg-container">
    <img src="{{ '/images/projet-accueil/nuage-bienvenue-pc.svg' | url }}" 
         class="nuages-bleus-curvy pc-svg" 
         alt="Illustration de nuages pour la pr√©sentation du blog sur PC"
         loading="lazy">
    
    <img src="{{ '/images/projet-accueil/nuage-bienvenue-mobile.svg' | url }}" 
         class="nuages-bleus-curvy mobile-svg" 
         alt="Illustration de nuages pour la pr√©sentation du blog sur mobile"
         loading="lazy">
</div>







<section id="faq-simulateur-section">
  <div class="container-md">
    <h2 class="poppins-bold-titre-h2 mb-4">Questions fr√©quentes sur le co√ªt assmat vs cr√®che √† Br√©tigny</h2>

    <div class="accordion accordion-flush" id="faqAccordion">

      <!-- Question 1 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-1">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-1" aria-expanded="true" aria-controls="faq-collapse-1">
            √Ä quoi sert le simulateur de co√ªt assistante maternelle vs cr√®che √† Br√©tigny-sur-Orge ?
          </button>
        </h2>
        <div id="faq-collapse-1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            Le simulateur vous aide √† comparer le reste √† charge entre diff√©rents modes d‚Äôaccueil (assistante maternelle, cr√®che PSU, micro-cr√®che PAJE). Vous pouvez ainsi identifier la solution la plus adapt√©e √† votre budget et √† vos besoins familiaux, sans calculs complexes.
          </div>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-2">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-2" aria-expanded="false" aria-controls="faq-collapse-2">
            Les r√©sultats du simulateur sont-ils fiables ?
          </button>
        </h2>
        <div id="faq-collapse-2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            Oui, mais il s‚Äôagit d‚Äôune estimation indicative. Les aides varient selon votre situation personnelle, le type de structure choisi et la validation de la CAF. Aucune donn√©e personnelle n‚Äôest conserv√©e, garantissant votre confidentialit√©.
          </div>
        </div>
      </div>

      <!-- Question 3 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-3">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-3" aria-expanded="false" aria-controls="faq-collapse-3">
            Quels tarifs sont pris en compte pour les micro-cr√®ches ?
          </button>
        </h2>
        <div id="faq-collapse-3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            Les micro-cr√®ches appliquent librement leurs tarifs, g√©n√©ralement entre 9‚ÄØ‚Ç¨ et 10‚ÄØ‚Ç¨ de l‚Äôheure pour la premi√®re tranche, avec un tarif d√©gressif selon le nombre d‚Äôheures. Le simulateur utilise une fourchette r√©aliste pour l‚ÄôEssonne, mais le tarif pr√©cis d√©pend de chaque √©tablissement.
          </div>
        </div>
      </div>

      <!-- Question 4 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-4">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-4" aria-expanded="false" aria-controls="faq-collapse-4">
            O√π trouver les simulateurs officiels CAF et URSSAF ?
          </button>
        </h2>
        <div id="faq-collapse-4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            <ul>
              <li><a href="https://www.urssaf.fr/accueil/outils-documentation/simulateurs/calculer-reste-a-charge-cmg-pe.html" target="_blank" class="style-liens">Simulateur URSSAF CMG ‚Äì Assistante maternelle</a></li>
              <li><a href="https://monenfant.fr/simuler-le-cout-en-creche" target="_blank" class="style-liens">Simulateur CAF ‚Äì Cr√®che PSU (monenfant.fr)</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Question 5 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-5">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-5" aria-expanded="false" aria-controls="faq-collapse-5">
            Pourquoi proposer un simulateur sur le site d‚Äôune assistante maternelle ?
          </button>
        </h2>
        <div id="faq-collapse-5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            <strong>Ce simulateur est con√ßu pour :</strong>
            <ul>
              <li>Faire gagner du temps aux parents en regroupant les trois modes d‚Äôaccueil sur une seule page.</li>
              <li>Apporter plus de clart√© sur les diff√©rences de calcul entre cr√®ches PSU, cr√®ches PAJE et assistantes maternelles.</li>
              <li>Corriger les id√©es re√ßues : la cr√®che n‚Äôest pas toujours la solution la moins ch√®re.</li>
              <li>Rassurer les familles : le salaire d‚Äôune assistante maternelle peut sembler √©lev√©, mais le reste √† charge r√©el, indemnit√©s incluses, reste souvent comparable √† celui d‚Äôune place en cr√®che PSU.</li>
              <li>Adapter les tarifs pour maintenir une coh√©rence entre les offres locales tout en pr√©servant la p√©rennit√© de l‚Äôactivit√© professionnelle.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Question 6 -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq-heading-6">
          <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-6" aria-expanded="false" aria-controls="faq-collapse-6">
            O√π consulter des exemples concrets de co√ªt r√©el ?
          </button>
        </h2>
        <div id="faq-collapse-6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body poppins-regular-balise-p">
            Vous pouvez acc√©der √† des exemples pr√©cis de reste √† charge et de calculs pour diff√©rentes situations familiales √† Br√©tigny-sur-Orge sur la page 
            <a href="#exemples-cout-reel-assistante-maternelle" class="style-liens">Exemples de co√ªt r√©el pour une assistante maternelle</a>.
          </div>
        </div>
      </div>


 <!-- Question 7 -->
<div class="accordion-item">
  <h2 class="accordion-header" id="faq-heading-7">
    <button class="accordion-button poppins-bold-balise-p" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-7" aria-expanded="false" aria-controls="faq-collapse-7">
      Pourquoi mon aide CMG peut-elle changer au cours du contrat ?
    </button>
  </h2>
  <div id="faq-collapse-7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
    <div class="accordion-body poppins-regular-balise-p">
      Le montant du Compl√©ment de mode de garde (CMG) n'est pas fixe. La CAF r√©√©value vos droits chaque ann√©e en fonction de vos revenus N-2. <a href="#conseil-expert-cmg" class="style-liens">Je vous aide √† anticiper</a> d√®s le d√©but de l'accueil pour une collaboration sur le long terme.
    </div>
  </div>
</div>


    </div>
  </div>
</section>










<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>




<script>
  const seuilsCMG = {
    couple: [53119, 60659, 68119],
    mono: [74367, 84923, 95479]
  };

  const majorationParEnfant = {
    couple: 7540,
    mono: 10556
  };

// üëâ Ensuite on ajoute (si condition) le comparatif CMG AVANT le reste du contenu
const anciensBar√®mesCMG_couple = {
  1: [
    { seuil: 23903, montant: 538.27 },
    { seuil: 53119, montant: 339.42 },
    { seuil: Infinity, montant: 203.62 }
  ],
  2: [
    { seuil: 27295, montant: 538.27 },
    { seuil: 60659, montant: 339.42 },
    { seuil: Infinity, montant: 203.62 }
  ],
  3: [
    { seuil: 30687, montant: 538.27 },
    { seuil: 68199, montant: 339.42 },
    { seuil: Infinity, montant: 203.62 }
  ],
  4: [
    { seuil: 34079, montant: 538.27 },
    { seuil: 75739, montant: 339.42 },
    { seuil: Infinity, montant: 203.62 }
  ]
};

const anciensBar√®mesCMG_mono = {
  1: [
    { seuil: 33464, montant: 699.75 },    // Tranche 1 jusqu'√† 33 464 ‚Ç¨
    { seuil: 74367, montant: 441.25 },    // Tranche 2 jusqu'√† 74 367 ‚Ç¨
    { seuil: Infinity, montant: 264.71 }  // Tranche 3 au-del√†
  ],
  2: [
    { seuil: 38213, montant: 699.75 },
    { seuil: 84923, montant: 441.25 },
    { seuil: Infinity, montant: 264.71 }
  ],
  3: [
    { seuil: 42962, montant: 699.75 },
    { seuil: 95479, montant: 441.25 },
    { seuil: Infinity, montant: 264.71 }
  ],
  4: [
    { seuil: 47711, montant: 699.75 },
    { seuil: 106035, montant: 441.25 },
    { seuil: Infinity, montant: 264.71 }
  ]
};


function getAncienCMG(nbEnfants, revenu, situation) {
  const baremes = situation === 'mono' ? anciensBar√®mesCMG_mono : anciensBar√®mesCMG_couple;
  const bareme = baremes[Math.min(nbEnfants, 4)] || [];
  const found = bareme.find(bracket => revenu <= bracket.seuil);
  return found ? found.montant : 0;
}



  const seuilsHeures = {
    "0-3": 100,
    "3-6": 50,
    "fratrie-0-3": 150,
    "fratrie-3-6": 100
  };

  function calculSimulation(data) {
      const {
    situation,
    nbEnfants,
    handicap,
    revenuAnnuel,
    heuresMensuelles,
    tauxHoraireNet,
    salaireNet,
    indemEntretien,
    indemRepas,
    heuresMensuellesPSU,
    heuresMensuellesMicro
  } = data;


   const hPSU = Number(heuresMensuellesPSU) || 0;
const hMicro = Number(heuresMensuellesMicro) || 0;
const heuresHebdoMicro = hMicro / 4.333;

    const salaireComplet = salaireNet + indemEntretien + indemRepas;
    const tauxComplet = (salaireComplet * tauxHoraireNet) / salaireNet;
    const coutRef = 4.85;

    let tauxEffort;
    if (handicap && nbEnfants > 1) {
      tauxEffort = [0.000516, 0.000413, 0.000310, 0.000206][nbEnfants - 2];
    } else {
      const tableEffort = [0.000619, 0.000516, 0.000413, 0.000310];
      tauxEffort = nbEnfants >= 8 ? 0.000206 : tableEffort[Math.min(nbEnfants - 1, 3)];
    }

    const TEH = (tauxComplet / coutRef) * tauxEffort * 100;
    const revenusMensuels = revenuAnnuel / 12;
    const cmgRemunerationReduit = revenusMensuels > 8500;
    const resteChargeHoraire = (revenusMensuels * TEH) / 100;
    const resteChargeAssmat = resteChargeHoraire * heuresMensuelles;

    let resteChargeAssmatPlafonne;
if (salaireComplet && salaireComplet > 0) {
  resteChargeAssmatPlafonne = Math.min(resteChargeAssmat, salaireComplet);
} else {
  resteChargeAssmatPlafonne = Math.max(resteChargeAssmat, 0);
}

    const heuresHebdo = heuresMensuelles / 4.333;

    const tarifsCeline = [
      [25, 9.69], [26, 9.32], [27, 8.97], [28, 8.66], [29, 8.35],
      [30, 8.08], [31, 7.82], [32, 7.57], [33, 7.35], [34, 7.12],
      [35, 6.92], [36, 6.73], [37, 6.54], [38, 6.38], [39, 6.22],
      [40, 6.05], [41, 5.90], [42, 5.77], [43, 5.64], [44, 5.50],
      [45, 5.38], [46, 5.22], [Infinity, 5.22]
    ];

    const tarifCeline = Number.isFinite(heuresHebdo)
      ? (tarifsCeline.find(([limite]) => heuresHebdo < limite)?.[1] ?? 0)
      : 0;

    const coutAssmat = tarifCeline * heuresMensuelles;

const cmgAssmatCeline = cmgRemunerationReduit
  ? 0
  : Math.max(0, salaireComplet - resteChargeAssmat);


    const resteChargeAssmatCeline = Math.min(coutAssmat - cmgAssmatCeline, salaireComplet);



   const tarifsMicro = {
  1: [[25, 9.90], [35, 9.50], [40, 9.00], [50, 8.50], [Infinity, 8.00]],
  2: [[25, 10.00], [35, 9.60], [40, 9.10], [50, 8.60], [Infinity, 8.10]],
  3: [[25, 10.20], [35, 9.80], [40, 9.30], [50, 8.80], [Infinity, 8.30]]
};



const seuilsCMGMicroCreche = {
  couple: {
    1: [24333, 54075],  // 1 enfant (standards)
    2: [27786, 61751],
    3: [31239, 69427],
    extraParEnfant: [3453, 7676]
  },
  mono: {
    1: [34066, 75705],  // Vos seuils monoparental 1 enfant
    2: [38900, 86451],
    3: [43734, 97197],
    4: [48568, 107943],
    extraParEnfant: [4866, 10752]  // Incr√©ment par enfant supp.
  }
};

const plafondsMicroCreche = {
  couple: { 1: 984.26, 2: 848.47, 3: 712.72 },
  mono: { 1: 1279.54, 2: 1103.01, 3: 926.54 }
};

function determineTrancheMicroCreche(revenuAnnuel, nbEnfants, situation) {
  const seuils = seuilsCMGMicroCreche[situation];
  let baseTranche1 = seuils[nbEnfants]?.[0] ?? seuils[3]?.[0] ?? 0;
  let baseTranche2 = seuils[nbEnfants]?.[1] ?? seuils[3]?.[1] ?? Infinity;

  // G√®re +4 enfants
  const extra = nbEnfants > 4 ? (nbEnfants - 4) * (seuils.extraParEnfant ?? [3453, 7676]) : [0, 0];
  baseTranche1 += extra[0];
  baseTranche2 += extra[1];

  if (revenuAnnuel <= baseTranche1) return 1;
  if (revenuAnnuel <= baseTranche2) return 2;
  return 3;
}


// D√©termination de la tranche en micro-cr√®che (selon revenu et nb enfants)
const tranche = determineTrancheMicroCreche(revenuAnnuel, nbEnfants, situation);



 const tarifMC = tarifsMicro[tranche].find(([limite]) => heuresHebdoMicro <= limite)[1];
let coutMC;
const prixAccueilSaisi = parseFloat(document.getElementById("prixAccueil")?.value);

if (checkboxPrixManuel.checked && !isNaN(prixAccueilSaisi)) {
  coutMC = prixAccueilSaisi;
} else {
  coutMC = tarifMC * hMicro;
}



    const plafonds = plafondsMicroCreche[situation];  
    const cmgMC = Math.min(coutMC * 0.85, plafonds[tranche]);
    const resteChargeMC = coutMC - cmgMC;

    const tarifHorairePSU = revenusMensuels * tauxEffort;
    const resteChargePSU = tarifHorairePSU * heuresMensuelles;

    return {
      resteAssmat: Math.round(resteChargeAssmatPlafonne),
      resteMicroCreche: Math.round(resteChargeMC),
      resteCrechePSU: Math.round(resteChargePSU),
      cmgAssmat: Math.round(cmgAssmatCeline),
      cmgMicroCreche: Math.round(cmgMC),
      tauxHoraireComplet: tauxComplet.toFixed(2),
      tauxEffortPourcent: TEH.toFixed(4)
    };
  }

  const heuresHebdoInput = document.getElementById("heuresHebdo");
  const heuresMensuellesInput = document.getElementById("heuresMensuelles");
  const tauxHoraireInput = document.getElementById("tauxHoraire");
  const salaireNetInput = document.getElementById("salaireNet");
  const indemEntretienInput = document.getElementById("indemEntretien");
const indemRepasInput = document.getElementById("indemRepas");
 const semainesParAnSelect = document.getElementById("semainesParAn");


function updateTauxComplet() {
  const heuresHebdo = parseFloat(document.getElementById("heuresHebdo").value) || 0;
  const salaireNet = parseFloat(document.getElementById("salaireNet").value) || 0;
  const indemEntretien = parseFloat(document.getElementById("indemEntretien").value) || 0;
  const indemRepas = parseFloat(document.getElementById("indemRepas").value) || 0;
  const tauxHoraireNet = parseFloat(document.getElementById("tauxHoraire").value) || 0;
  const semainesParAn = parseInt(semainesParAnSelect.value, 10) || 0;

  // Calculs PSU (bas√© sur semaines choisies) et micro (toujours 52 sem.)
  const heuresMensuellesPSU = (heuresHebdo * semainesParAn) / 12;
  const heuresMensuellesMicro = (heuresHebdo * 52) / 12;

  document.getElementById("heuresMensuellesPSU").value = heuresMensuellesPSU.toFixed(2);
  document.getElementById("heuresMensuellesMicro").value = heuresMensuellesMicro.toFixed(2);

  const salaireComplet = salaireNet + indemEntretien + indemRepas;
  let tauxComplet = 0;
  if (salaireNet > 0) {
    tauxComplet = (salaireComplet * tauxHoraireNet) / salaireNet;
  }
  // Plafonnement affichage √† 7,99
  if (tauxComplet > 7.99) {
    tauxComplet = 7.99;
  }
  document.getElementById("tauxComplet").value = tauxComplet.toFixed(2);

  // Message alerte
  const alerte = document.getElementById("alertePlafondCMG");
  if ((salaireNet > 0) && ((salaireComplet * tauxHoraireNet) / salaireNet > 7.99)) {
    alerte.textContent = "Le plafond CMG de 8‚ÄØ‚Ç¨/h est atteint. Le CMG reste vers√©, seule la part au-del√† du plafond reste √† votre charge. Pour une estimation exacte, consultez le simulateur officiel URSSAF (notre simulateur ne prend pas en compte les montants au-del√† du plafond).";
    alerte.classList.remove("d-none");
  } else {
    alerte.textContent = "";
    alerte.classList.add("d-none");
  }
}


  function updateHeuresMensuellesEtSalaire() {
    const heuresHebdo = parseFloat(heuresHebdoInput.value) || 0;
    const tauxHoraire = parseFloat(tauxHoraireInput.value) || 0;
    const semainesParAn = parseInt(semainesParAnSelect.value, 10) || 0;

 // Calcul des heures mensuelles proportionnel aux semaines travaill√©es
  const heuresMensuelles = (heuresHebdo * semainesParAn) / 12;



  // Calcul du salaire net de base
  let salaireNet = (tauxHoraire * heuresHebdo * semainesParAn) / 12;

 

   

    heuresMensuellesInput.value = heuresMensuelles.toFixed(2);
    salaireNetInput.value = salaireNet.toFixed(2);
    updateTauxComplet();
  }

  heuresHebdoInput.addEventListener("input", updateHeuresMensuellesEtSalaire);
  tauxHoraireInput.addEventListener("input", updateHeuresMensuellesEtSalaire);
   semainesParAnSelect.addEventListener("change", updateHeuresMensuellesEtSalaire);

  indemEntretienInput.addEventListener("input", updateTauxComplet);
indemRepasInput.addEventListener("input", updateTauxComplet);

  const form = document.getElementById("simulateur-form");
  const resultBox = document.getElementById("result-box");
  const barometre = document.getElementById("barometre-wrapper");
 const curseur = document.getElementById("curseur");

 

form.addEventListener("submit", function (e) {
  e.preventDefault();

  const tauxCompletAffiche = parseFloat(document.getElementById("tauxComplet").value);
  const alerte = document.getElementById("alertePlafondCMG");

  if (tauxCompletAffiche >= 7.99) {
    if (alerte) {
      alerte.textContent =
        "‚ö†Ô∏è Le plafond CMG de 8‚ÄØ‚Ç¨/h est atteint. Le CMG reste vers√©, seule la part au-del√† du plafond reste √† votre charge. Pour une estimation exacte, consultez le simulateur officiel URSSAF (notre simulateur ne prend pas en compte les montants au-del√† du plafond).";

      alerte.classList.remove("d-none");
      alerte.classList.add("alert", "alert-warning", "visible");

      // Scroll vers l'alerte automatiquement
      alerte.scrollIntoView({
        behavior: "smooth",
        block: "center"
      });

      // Accessibilit√© : focus sur l'alerte
      alerte.setAttribute("tabindex", "-1");
      alerte.focus();
    }

    // Masquer les anciens r√©sultats
    resultBox.classList.add("d-none");
    resultBox.innerHTML = "";
    barometre.classList.add("d-none");
    return;
  } else {
    if (alerte) {
      alerte.textContent = "";
      alerte.classList.add("d-none");
      alerte.classList.remove("alert", "alert-warning", "visible");
    }
  }
  const typeFamille = document.querySelector("input[name='situation']:checked")?.value;
  const nbEnfants = parseInt(document.getElementById("nbEnfants").value, 10);
  const revenu = parseInt(document.getElementById("revenu").value, 10);
  const age = document.getElementById("ageEnfant").value;



  updateHeuresMensuellesEtSalaire();

  const heuresMensuelles = parseFloat(heuresMensuellesInput.value) || 0;

 const heuresMensuellesPSU = parseFloat(document.getElementById("heuresMensuellesPSU").value) || 0;
  const heuresMensuellesMicro = parseFloat(document.getElementById("heuresMensuellesMicro").value) || 0;


  const tauxHoraireNet = parseFloat(tauxHoraireInput.value) || 0;
  const salaireNet = parseFloat(salaireNetInput.value) || 0;
  const indemEntretien = parseFloat(document.getElementById("indemEntretien").value) || 0;
  const indemRepas = parseFloat(document.getElementById("indemRepas").value) || 0;
  const handicap = document.getElementById("handicap")?.checked || false;

  const baseSeuil = seuilsCMG[typeFamille][Math.max(0, Math.min(nbEnfants - 1, 2))] || 0;
  const enfantsSupp = Math.max(0, nbEnfants - 3);
  const seuilTotal = baseSeuil + (enfantsSupp * majorationParEnfant[typeFamille]);

  const revenuOK = revenu <= seuilTotal;
  const seuilHeures = seuilsHeures[age] || 0;
  const heuresOK = heuresMensuelles >= seuilHeures;
  const estGagnant = revenuOK && heuresOK;

 

  resultBox.classList.remove("d-none", "alert-success", "alert-warning", "alert-info");

 
  const resultats = calculSimulation({
    situation: typeFamille,
    nbEnfants,
    handicap,
    revenuAnnuel: revenu,
    heuresMensuelles,
    heuresMensuellesPSU,
  heuresMensuellesMicro,
    tauxHoraireNet,
    salaireNet,
    indemEntretien,
    indemRepas
    
  });

 const cmg = resultats.cmgAssmat;
const seuilCMG = { profil1: 200, profil2Min: 120 };
const restePSU = resultats.resteCrechePSU;
const resteMC = resultats.resteMicroCreche;
const resteAssmat = resultats.resteAssmat;

let profil;

if (
  (resteAssmat <= restePSU && cmg > seuilCMG.profil1 && estGagnant) ||
  (resteAssmat <= resteMC && cmg >= 529)
) {
  profil = 1; // profil optimal (fusionn√© avec ancien profil 2)
} else if (resteAssmat <= resteMC && cmg >= seuilCMG.profil2Min) {
  profil = 2; // aide partielle
} else {
  profil = 3; // aide standard
}








const contenuCommunHTML = `
  <em>Mais choisir une assistante maternelle agr√©√©e, c‚Äôest bien plus qu‚Äôune question de tarif</em><br><br>

  <ul>
    <li>Un cadre familial, rassurant et attentif aux besoins de chaque enfant</li>
    <li>Des √©changes quotidiens et une relation de confiance avec les parents</li>
    <li>Un accompagnement √©ducatif respectueux de vos choix et de vos valeurs</li>
    <li>Des temps de sociabilisation au Relais Petite Enfance et lors des sorties au parc</li>
    <li>Des promenades quotidiennes pour favoriser l‚Äô√©veil sensoriel et le lien √† la nature</li>
    <li>Contrairement aux grandes structures, je peux personnaliser l‚Äôaccueil selon votre enfant : si vous avez des pr√©f√©rences √©ducatives, je les prends en compte avec souplesse.</li>
  </ul>

  <strong>R√©duisez votre reste √† charge :</strong>
  <br><a href="https://chubert91assmat.netlify.app/posts/entreprises/cesu-prefinances/"
    class="btn btn-action-primary mt-3 d-inline-block">Je d√©couvre les CESU pr√©-financ√©s ! ‚Üí</a><br><br>

  Je pourrais vous en dire plus, mais le mieux est de laisser parler ceux qui m‚Äôont confi√© leur enfant : d√©couvrez leurs avis
  sur Google :
  <br><a href="https://chubert91assmat.netlify.app/#avis"
    class="btn btn-action-primary mt-3 d-inline-block"><span
      class="etoiles">&#9733;&#9733;&#9733;&#9733;&#9733;</span> 100% de parents satisfaits ‚Üí</a><br><br>

  N'h√©sitez pas √† me contacter pour discuter ensemble de votre situation :
  <br><a href="/contact/" class="btn btn-action-primary mt-3 d-inline-block">Discutons ensemble de vos besoins ‚Üí</a><br><br>
`;



function afficherMessageReforme(cmg, ancienCMG) {
  if (cmg > ancienCMG) {
    const gain = (cmg - ancienCMG).toFixed(2).replace('.', ',');
    return `
      <div class="alert alert-info" role="alert">
        <img src="{{ '/images/simulateur/gain-simulateur-bretigny.svg' | url }}" class="bien-etre-icon" alt="ic√¥ne tirelire">
        Gr√¢ce √† la r√©forme du CMG, vous b√©n√©ficiez d'une aide <strong>plus √©lev√©e</strong> que celle pr√©vue auparavant pour votre niveau de revenus et votre composition familiale.<br>
        <strong>Ancien bar√®me (avant r√©forme) CMG fixe :</strong> ${ancienCMG.toFixed(2)} ‚Ç¨<br>
        <strong>Nouveau calcul (depuis sept. 2025) CMG :</strong> ${cmg} ‚Ç¨<br>
        <strong>Soit +${gain}‚ÄØ‚Ç¨/mois d‚Äôaide suppl√©mentaire</strong> avec la r√©forme cmg 2025.
      </div><br>
    `;
  }
  return '';
}
















// Affichage selon le profil
if (profil === 1) {
   // R√©cup√®re les valeurs saisies
  const typeFamilleLibelle = document.querySelector('input[name="situation"]:checked').nextElementSibling.textContent;
  const nbEnfants = document.getElementById('nbEnfants').value;
  const revenu = document.getElementById('revenu').value;
  const heuresHebdo = document.getElementById('heuresHebdo').value;
  const semainesParAn = document.getElementById('semainesParAn').options[document.getElementById('semainesParAn').selectedIndex].text;
  const tauxHoraire = document.getElementById('tauxHoraire').value;
  const indemEntretien = document.getElementById('indemEntretien').value;
  const indemRepas = document.getElementById('indemRepas').value;

  // Construit le r√©capitulatif
  const recapSaisie = `
    <div class="recap-saisie mb-4">
    <div class="anti-coupure">
      <div class="html2pdf__page-break"></div>
     

<h3 class="poppins-bold-titre-h3">Vos donn√©es de simulation</h3>


    
      <ul class="poppins-regular-balise-p">
        <li><strong>Situation familiale :</strong> ${typeFamilleLibelle}</li>
        <li><strong>Nombre d‚Äôenfants √† charge :</strong> ${nbEnfants}</li>
        <li><strong>Ressources annuelles :</strong> ${revenu} ‚Ç¨</li>
        <li><strong>Heures de garde par semaine :</strong> ${heuresHebdo}</li>
        <li><strong>Type de contrat :</strong> ${semainesParAn}</li>
        <li><strong>Taux horaire net :</strong> ${tauxHoraire} ‚Ç¨</li>
        <li><strong>Indemnit√© d‚Äôentretien :</strong> ${indemEntretien} ‚Ç¨/mois</li>
        <li><strong>Indemnit√© de repas :</strong> ${indemRepas} ‚Ç¨/mois</li>
      </ul>
    </div>
    </div>
  `;

  // Injecte le r√©capitulatif + le r√©sultat
  resultBox.classList.add("result-profil-1");
  resultBox.classList.add("poppins-regular-balise-p");
  resultBox.innerHTML = recapSaisie + `


    Vous √™tes <strong>√©ligible</strong> √† un <strong>CMG tr√®s avantageux</strong> permettant un reste √† charge comparable ou identique √† celui d'une cr√®che subventionn√©e.<br><br>
    <strong>Estimation (avant cr√©dit d'imp√¥t):</strong><br>

<span class="bullet-dot bullet-green"></span>Reste √† charge Cr√®che PSU : <strong>${restePSU} ‚Ç¨</strong><br>
<span class="bullet-dot"></span>Reste √† charge Assistante Maternelle : <strong>${resteAssmat} ‚Ç¨</strong><br>
<span class="bullet-dot bullet-orange"></span>Reste √† charge Micro-cr√®che PAJE : <strong>${resteMC} ‚Ç¨</strong> <em>(Estimation moyenne locale ‚Äì √† confirmer avec la cr√®che sauf si vous avez saisi un devis.)</em><br><br>


 <em>Gr√¢ce √† ce niveau d‚Äôaide, vous pouvez choisir la solution la plus adapt√©e √† votre famille, sans contrainte de budget.</em><br><br>


    <strong>CMG Mensuel :</strong><br>

    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    Assistante Maternelle : <strong>${cmg} ‚Ç¨</strong><br>

    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    Micro-cr√®che PAJE : <strong>${resultats.cmgMicroCreche} ‚Ç¨</strong><br><br>




    <em>Ce niveau d‚Äôaide vous permet de profiter d‚Äôun accueil de qualit√© avec un tarif particuli√®rement comp√©titif chez une assistante maternelle agr√©√©e.</em>
  `;


// Calcul ancien CMG
const ancienCMG = getAncienCMG(nbEnfants, revenu, typeFamille);
const messageReforme = afficherMessageReforme(cmg, ancienCMG);
resultBox.innerHTML += messageReforme;

document.getElementById("btn-pdf").classList.remove("d-none");
document.getElementById("btn-reset").classList.remove("d-none");


} else if (profil === 2) {
  // R√©cup√®re les valeurs saisies
  const typeFamilleLibelle = document.querySelector('input[name="situation"]:checked').nextElementSibling.textContent;
  const nbEnfants = document.getElementById('nbEnfants').value;
  const revenu = document.getElementById('revenu').value;
  const heuresHebdo = document.getElementById('heuresHebdo').value;
  const semainesParAn = document.getElementById('semainesParAn').options[document.getElementById('semainesParAn').selectedIndex].text;
  const tauxHoraire = document.getElementById('tauxHoraire').value;
  const indemEntretien = document.getElementById('indemEntretien').value;
  const indemRepas = document.getElementById('indemRepas').value;

  // Construit le r√©capitulatif
  const recapSaisie = `
    <div class="recap-saisie mb-4">
        <div class="anti-coupure">
     <div class="html2pdf__page-break"></div>
      <h3>Vos donn√©es de simulation</h3>
     
      <ul class="list-unstyled">
        <li><strong>Situation familiale :</strong> ${typeFamilleLibelle}</li>
        <li><strong>Nombre d‚Äôenfants √† charge :</strong> ${nbEnfants}</li>
        <li><strong>Ressources annuelles :</strong> ${revenu} ‚Ç¨</li>
        <li><strong>Heures de garde par semaine :</strong> ${heuresHebdo}</li>
        <li><strong>Type de contrat :</strong> ${semainesParAn}</li>
        <li><strong>Taux horaire net :</strong> ${tauxHoraire} ‚Ç¨</li>
        <li><strong>Indemnit√© d‚Äôentretien :</strong> ${indemEntretien} ‚Ç¨/mois</li>
        <li><strong>Indemnit√© de repas :</strong> ${indemRepas} ‚Ç¨/mois</li>
      </ul>
    </div>
    </div>
  `;

  // Injecte le r√©capitulatif + le r√©sultat
  resultBox.classList.add("result-profil-2");
  resultBox.classList.add("poppins-regular-balise-p");
  resultBox.innerHTML = recapSaisie + `

   Le CMG auquel vous avez droit repr√©sente une aide cons√©quente pour faciliter l‚Äôaccueil de votre enfant. 
    Vous b√©n√©ficiez d‚Äôune aide partielle mais significative pour avoir acc√®s √† un accueil personnalis√©.<br><br>
    <strong>Estimation (avant cr√©dit d'imp√¥t) :</strong><br>

<span class="bullet-dot bullet-green"></span>Reste √† charge Cr√®che PSU : <strong>${restePSU} ‚Ç¨</strong><br>
<span class="bullet-dot"></span>Reste √† charge Assistante Maternelle : <strong>${resteAssmat} ‚Ç¨</strong><br>
<span class="bullet-dot bullet-orange"></span>Reste √† charge Micro-cr√®che PAJE : <strong>${resteMC} ‚Ç¨</strong> <em>(Estimation moyenne locale ‚Äì √† confirmer avec la cr√®che sauf si vous avez saisi un devis.)</em><br><br>


 <em>Vous pouvez ainsi choisir la solution la plus adapt√©e √† votre famille, selon vos priorit√©s.</em><br><br>

    <strong>CMG Mensuel :</strong><br>

    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    Assistante Maternelle : <strong>${cmg} ‚Ç¨</strong><br>

    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    Micro-cr√®che PAJE : <strong>${resultats.cmgMicroCreche} ‚Ç¨</strong><br><br>



  `;

// Calcul ancien CMG
const ancienCMG = getAncienCMG(nbEnfants, revenu);
const messageReforme = afficherMessageReforme(cmg, ancienCMG);
resultBox.innerHTML += messageReforme;


document.getElementById("btn-pdf").classList.remove("d-none");
document.getElementById("btn-reset").classList.remove("d-none");



} else if (profil === 3) {
  // R√©cup√®re les valeurs saisies
  const typeFamilleLibelle = document.querySelector('input[name="situation"]:checked').nextElementSibling.textContent;
  const nbEnfants = document.getElementById('nbEnfants').value;
  const revenu = document.getElementById('revenu').value;
  const heuresHebdo = document.getElementById('heuresHebdo').value;
  const semainesParAn = document.getElementById('semainesParAn').options[document.getElementById('semainesParAn').selectedIndex].text;
  const tauxHoraire = document.getElementById('tauxHoraire').value;
  const indemEntretien = document.getElementById('indemEntretien').value;
  const indemRepas = document.getElementById('indemRepas').value;

  // Construit le r√©capitulatif
  const recapSaisie = `
    <div class="recap-saisie mb-4">
        <div class="anti-coupure">
     <div class="html2pdf__page-break"></div>
      <h3>Vos donn√©es de simulation</h3>
     
      <ul class="list-unstyled">
        <li><strong>Situation familiale :</strong> ${typeFamilleLibelle}</li>
        <li><strong>Nombre d‚Äôenfants √† charge :</strong> ${nbEnfants}</li>
        <li><strong>Ressources annuelles :</strong> ${revenu} ‚Ç¨</li>
        <li><strong>Heures de garde par semaine :</strong> ${heuresHebdo}</li>
        <li><strong>Type de contrat :</strong> ${semainesParAn}</li>
        <li><strong>Taux horaire net :</strong> ${tauxHoraire} ‚Ç¨</li>
        <li><strong>Indemnit√© d‚Äôentretien :</strong> ${indemEntretien} ‚Ç¨/mois</li>
        <li><strong>Indemnit√© de repas :</strong> ${indemRepas} ‚Ç¨/mois</li>
      </ul>
    </div>
    </div>
  `;

  // Injecte le r√©capitulatif + le r√©sultat
  resultBox.classList.add("result-profil-3");
  resultBox.classList.add("poppins-regular-balise-p");
  resultBox.innerHTML = recapSaisie + `


    <strong>Un accueil de qualit√© pour votre enfant, dans un cadre chaleureux et s√©curis√©</strong><br><br>
    
    <strong>Estimation (avant cr√©dit d'imp√¥t) :</strong><br>
    <span class="bullet-dot"></span>Reste √† charge Assistante Maternelle : <strong>${resteAssmat} ‚Ç¨</strong><br>






    
    <strong>CMG Mensuel :</strong><br>
    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    Assistante Maternelle : <strong>${cmg} ‚Ç¨</strong><br>
    <img src="{{ '/images/faq/money-bag-svgrepo-com.svg' | url }}" class="checked-money" alt="ic√¥ne tirelire">
    <strong>Vous b√©n√©ficiez d'un cr√©dit d'imp√¥t.</strong><br><br>
  `;

  

const ancienCMG = getAncienCMG(nbEnfants, revenu);

if (cmg > ancienCMG) {
  const gain = (cmg - ancienCMG).toFixed(2).replace('.', ',');

  resultBox.innerHTML += `
    <div class="alert alert-info" role="alert">
      <img src="{{ '/images/simulateur/gain-simulateur-bretigny.svg' | url }}" class="bien-etre-icon" alt="ic√¥ne tirelire">
      Gr√¢ce √† la r√©forme du CMG, vous b√©n√©ficiez d'une aide <strong>plus √©lev√©e</strong> que celle pr√©vue auparavant pour votre niveau de revenus et votre composition familiale.<br>
      <strong>Ancien bar√®me (avant r√©forme) CMG fixe :</strong> ${ancienCMG.toFixed(2)} ‚Ç¨<br>
      <strong>Nouveau calcul (depuis sept. 2025) CMG :</strong> ${cmg} ‚Ç¨<br>
      <strong>Soit +${gain}‚ÄØ‚Ç¨/mois d‚Äôaide suppl√©mentaire</strong> avec la r√©forme cmg 2025.
    </div><br>
  `;
}
  }

  
resultBox.innerHTML += contenuCommunHTML;
document.getElementById("btn-pdf").classList.remove("d-none");
document.getElementById("btn-reset").classList.remove("d-none");



const minVal = Math.min(restePSU, resteMC);
const maxVal = Math.max(restePSU, resteMC);

let positionPercent = 0;
if (resteAssmat <= minVal) {
  positionPercent = 0;
} else if (resteAssmat >= maxVal) {
  positionPercent = 100;
} else {
  positionPercent = ((resteAssmat - minVal) / (maxVal - minVal)) * 100;
}

curseur.style.left = `${positionPercent}%`;
if (profil === 3) {
  barometre.classList.add("d-none");
} else {
  barometre.classList.remove("d-none");
  curseur.style.left = `${positionPercent}%`;
}

 

 // SCROLL AUTOMATIQUE VERS LA FEN√äTRE DE R√âSULTATS
  resultBox.scrollIntoView({
    behavior: "smooth",
    block: "center"
  });

});







function resetSimulation() {
  // Masque les r√©sultats et le barom√®tre
  document.getElementById("result-box").classList.add("d-none");
  document.getElementById("result-box").innerHTML = "";
  document.getElementById("barometre-wrapper").classList.add("d-none");

  // Masque les boutons d‚Äôaction
  document.getElementById("btn-pdf").classList.add("d-none");
  document.getElementById("btn-reset").classList.add("d-none");

  // R√©initialise le formulaire (vide tous les champs)
  document.getElementById("simulateur-form").reset();

  // ‚ûï Remise √† z√©ro manuelle des champs calcul√©s de #calculs-automatiques-assistante-maternelle
  document.getElementById("heuresMensuelles").value = "";
  document.getElementById("heuresMensuellesPSU").value = "";
  document.getElementById("heuresMensuellesMicro").value = "";
  document.getElementById("tauxComplet").value = "";
  document.getElementById("salaireNet").value = "";

  // Cache l‚Äôalerte du plafond CMG si visible
  const alertePlafond = document.getElementById("alertePlafondCMG");
  if (alertePlafond) {
    alertePlafond.classList.add("d-none");
    alertePlafond.textContent = "";
  }

  // Remet le curseur √† gauche
  const curseur = document.getElementById("curseur");
  if (curseur) {
    curseur.style.left = "0%";
  }

  // Coche d√©manuellement la case ¬´ Conna√Æt le prix d‚Äôaccueil ¬ª + cache champ saisie
  const prixAccueil = document.getElementById("prixAccueil");
  const checkboxPrix = document.getElementById("connaitPrixAccueil");
  const wrapperPrix = document.getElementById("prixAccueilWrapper");
  if (checkboxPrix && prixAccueil && wrapperPrix) {
    checkboxPrix.checked = false;
    prixAccueil.value = "";
    wrapperPrix.classList.add("d-none");
  }

  // Remonte en haut du formulaire pour une nouvelle saisie
  document.getElementById("simulateur-form").scrollIntoView({ behavior: "smooth" });
}









document.getElementById("btn-pdf").addEventListener("click", function () {
  const element = document.getElementById("result-box");

  console.log("Contenu √† exporter :", element.innerHTML); // Debug

  if (!element || element.classList.contains("d-none") || !element.innerHTML.trim()) {
    alert("Aucun r√©sultat √† exporter. Lancez d'abord une simulation.");
    return;
  }

 const opt = {
  margin: [5, 5, 5, 5],
  filename: 'estimation-CMG.pdf',
  image: { type: 'jpeg', quality: 0.95 },
  html2canvas: { 
    scale: 2,
    letterRendering: true,
    logging: true
  },
  jsPDF: { 
    unit: 'mm', 
    format: 'a4', 
    orientation: 'portrait' 
  },
  pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
};

// Force un "reflow" du DOM
element.offsetHeight;

setTimeout(() => {
  html2pdf().set(opt).from(element).save().catch(err => {
    console.error("Erreur lors de la g√©n√©ration du PDF :", err);
    alert("Erreur lors de la g√©n√©ration du PDF. Consultez la console.");
  });
}, 500);


});



document.getElementById("btn-reset").addEventListener("click", resetSimulation);

// ‚ûï Ton code ici
const checkboxPrixManuel = document.getElementById("connaitPrixAccueil");
const prixAccueilWrapper = document.getElementById("prixAccueilWrapper");

checkboxPrixManuel.addEventListener("change", () => {
  if (checkboxPrixManuel.checked) {
    prixAccueilWrapper.classList.remove("d-none");
  } else {
    prixAccueilWrapper.classList.add("d-none");
    document.getElementById("prixAccueil").value = ""; // üßº reset du champ personnalis√©
  }
});


</script>


